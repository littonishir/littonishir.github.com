(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{500:function(v,_,t){"use strict";t.r(_);var e=t(44),o=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"布局优化-ui"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#布局优化-ui"}},[v._v("#")]),v._v(" 布局优化（UI）")]),v._v(" "),t("p",[v._v("总结 ：减少层级嵌套，防止过度绘制。")]),v._v(" "),t("h2",{attrs:{id:"减少层级嵌套"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#减少层级嵌套"}},[v._v("#")]),v._v(" 减少层级嵌套")]),v._v(" "),t("p",[v._v("建议多使用ConstraintLayout布局，再者就是使用布局标签优化布局。")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("include标签:将布局中的公共部分提取出来以供其他Layout使用")])]),v._v(" "),t("li",[t("p",[v._v("ViewStub标签:")]),v._v(" "),t("p",[t("code",[v._v("ViewStub")]),v._v("标签同"),t("code",[v._v("include")]),v._v("一样可以用来引入一个外部布局。不同的是，"),t("code",[v._v("ViewStub")]),v._v("引入的布局默认是不会显示也不会占用位置,只在特定情况下才出现的布局，从而在解析的"),t("code",[v._v("layout")]),v._v("的时候可以节省cpu资源。例如：进度条，网络连接失败显示的提示布局等。")]),v._v(" "),t("blockquote",[t("p",[t("strong",[v._v("ViewStub所加载的布局是不可以使用"),t("code",[v._v("merge")]),v._v("标签的")])])])]),v._v(" "),t("li",[t("p",[v._v("merge标签:消除多余层级")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("布局顶接点是"),t("code",[v._v("FrameLayout")]),v._v("并且不需要设置"),t("code",[v._v("background")]),v._v("或者"),t("code",[v._v("padding")]),v._v("等属性，可使用"),t("code",[v._v("merge")]),v._v("代替，因为"),t("code",[v._v("Activity")]),v._v("父布局就是一个"),t("code",[v._v("FrameLayout")]),v._v("。")])]),v._v(" "),t("li",[t("p",[v._v("某布局作为子布局被其他布局include时，使用merge当作该布局的顶节点，这样在被引入时，顶结点会自动被忽略，而其自己点全部合并到主布局中。")])])])])]),v._v(" "),t("blockquote",[t("p",[v._v("层级嵌套检查的打开方式Android Studio →tools→Layout Inspector→选择模拟器既可。")])]),v._v(" "),t("h2",{attrs:{id:"防止过度绘制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防止过度绘制"}},[v._v("#")]),v._v(" 防止过度绘制")]),v._v(" "),t("p",[v._v("**过渡绘制是指屏幕上某个像素在同一帧的时间内绘制了多次。**在多层次的UI结构里面，如果不可见的UI也在做绘制操作，这就会导致某些像素区域被绘制了多次，这就是很大程度上浪费了CPU和GPU资源。"),t("strong",[v._v("最最常见的过度绘制，就是设置了无用的背景颜色！！！")])]),v._v(" "),t("h3",{attrs:{id:"移除不必要的background"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除不必要的background"}},[v._v("#")]),v._v(" 移除不必要的background")]),v._v(" "),t("blockquote",[t("p",[v._v("设置 -> 开发者选项 -> 调试GPU过度绘制 -> 显示过度绘制区域")])]),v._v(" "),t("p",[v._v("打开以后之后，你会发现屏幕上有各种颜色，此时你可以切换到需要检测的程序与界面，对于各个色块的含义，请看下图：")]),v._v(" "),t("p",[v._v("蓝色，淡绿，淡红，深红代表了4种不同程度的Overdraw情况，")]),v._v(" "),t("ul",[t("li",[v._v("蓝色： 意味着overdraw 1倍。像素绘制了两次。大片的蓝色还是可以接受的（若整个窗口是蓝色的，可以摆脱一层）。")]),v._v(" "),t("li",[v._v("绿色： 意味着overdraw 2倍。像素绘制了三次。中等大小的绿色区域是可以接受的但你应该尝试优化、减少它们。")]),v._v(" "),t("li",[v._v("淡红： 意味着overdraw 3倍。像素绘制了四次，小范围可以接受。")]),v._v(" "),t("li",[v._v("深红： 意味着overdraw 4倍。像素绘制了五次或者更多。这是错误的，要修复它们。")])])])}),[],!1,null,null,null);_.default=o.exports}}]);